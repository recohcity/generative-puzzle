# ç”Ÿæˆå¼æ‹¼å›¾æ¸¸æˆ - ç»Ÿä¸€è§„åˆ™æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£çŠ¶æ€

**ç‰ˆæœ¬**: v3.2 (å¹³è¡¡ä¼˜åŒ–ç‰ˆ)  
**æœ€åæ›´æ–°**: 2025/12/26  
**çŠ¶æ€**: âœ… ä¸ä»£ç å®ç°å®Œå…¨ä¸€è‡´  
**åŸºå‡†ä»£ç **: `utils/score/ScoreCalculator.ts` + `utils/puzzle/cutGeneratorConfig.ts` + `utils/puzzle/graph/NetworkCutter.ts`

> **æƒå¨æ€§å£°æ˜**ï¼šæœ¬æ–‡æ¡£ä¸ºæ¸¸æˆå”¯ä¸€æƒå¨è§„åˆ™è¯´æ˜ï¼Œä¸ä»£ç å®ç°å®Œå…¨ä¸€è‡´ã€‚æ‰€æœ‰æ¸¸æˆé€»è¾‘ã€åˆ†æ•°è®¡ç®—ã€éš¾åº¦è®¾è®¡å‡ä»¥æ­¤æ–‡æ¡£å’Œå¯¹åº”ä»£ç ä¸ºå‡†ã€‚
>
> **æ–‡æ¡£åˆå¹¶è¯´æ˜**ï¼šæœ¬æ–‡æ¡£å·²åˆå¹¶äº†åŸ `docs/difficulty-design.md` å’Œ `docs/score-system.md` çš„æ‰€æœ‰å†…å®¹ï¼ŒåŸæ–‡æ¡£å·²è¢«åˆ é™¤ä»¥é¿å…ä¿¡æ¯ä¸ä¸€è‡´ã€‚
>
> **v3.2 æ›´æ–°è¯´æ˜**ï¼šä¿®å¤äº†æ›²çº¿åˆ‡å‰²æ‹¼å›¾æ•°é‡ä¸ä¸€è‡´é—®é¢˜ï¼Œé‡æ–°å¹³è¡¡äº†åˆ‡å‰²ç±»å‹å’Œå½¢çŠ¶éš¾åº¦ç³»æ•°ã€‚

## âš–ï¸ v3.2 å¹³è¡¡ä¼˜åŒ–æ‘˜è¦

### ä¿®å¤çš„é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| æ›²çº¿åˆ‡å‰²æ‹¼å›¾æ•°é‡è¿‡å°‘ | æ”¾å°„çº¿ä½¿ç”¨ `targetCuts`ï¼Œä½†æ”¾å°„çº¿ä¸äº¤å‰ | æ”¹ç”¨ `pieceRange.max` |
| æ›²çº¿éš¾åº¦ç³»æ•°è¿‡é«˜ | åŸç³»æ•°1.5åŸºäºé”™è¯¯å‡è®¾ | é™ä½åˆ°1.25 |
| æ–œçº¿éš¾åº¦ç³»æ•°åé«˜ | ä¸‰è§’å½¢å½¢çŠ¶ç‹¬ç‰¹ï¼Œè¯†åˆ«è¾ƒæ˜“ | ä»1.2é™åˆ°1.15 |
| é”¯é½¿å½¢çŠ¶ç³»æ•°è¿‡é«˜ | ç‹¬ç‰¹å½¢çŠ¶åè€Œæ›´æ˜“è¯†åˆ« | ä»1.2é™åˆ°1.05 |

### å¹³è¡¡åçš„å¯¹æ¯”

| é…ç½® | v3.1ç³»æ•° | v3.2ç³»æ•° | å˜åŒ– |
|------|---------|---------|------|
| æ›²çº¿åˆ‡å‰² | 1.5 | 1.25 | -17% |
| æ–œçº¿åˆ‡å‰² | 1.2 | 1.15 | -4% |
| é”¯é½¿å½¢çŠ¶ | 1.2 | 1.05 | -12.5% |

### æ‹¼å›¾æ•°é‡éªŒè¯ï¼ˆéš¾åº¦8ï¼‰

| åˆ‡å‰²ç±»å‹ | v3.1æ•°é‡ | v3.2æ•°é‡ | çŠ¶æ€ |
|---------|---------|---------|------|
| ç›´çº¿ | ~31å— | ~31å— | âœ… ä¸å˜ |
| æ–œçº¿ | ~31å— | ~31å— | âœ… ä¸å˜ |
| æ›²çº¿ | ~16å— | ~30å— | âœ… ä¿®å¤ |

## ğŸ¯ è®¾è®¡åŸåˆ™

### æ ¸å¿ƒç†å¿µ
- **åŸºäºæœ€ä¼˜è§£**ï¼šæ—‹è½¬è¯„åˆ†åŸºäºæ•°å­¦æœ€ä¼˜è§£ï¼Œé¼“åŠ±ç­–ç•¥æ€è€ƒ
- **éš¾åº¦å¹³è¡¡**ï¼šç»Ÿä¸€æç¤ºæ¬¡æ•°ï¼Œå…¬å¹³åˆç†
- **ç«äº‰æ¿€åŠ±**ï¼šæ—¶é—´å¥–åŠ±åŸºäºå®Œæˆé€Ÿåº¦ï¼ŒåŠ¨æ€ç«äº‰
- **æ•™è‚²æ„ä¹‰**ï¼šæ˜¾ç¤ºæœ€ä¼˜è§£å’Œæ•ˆç‡ï¼Œå¸®åŠ©ç©å®¶æå‡

### æ¶æ„å®Œæ•´æ€§
- **é›¶ç ´åæ€§æ‰©å±•**ï¼šå®Œå…¨åŸºäºç°æœ‰ç³»ç»Ÿæ‰©å±•ï¼Œä¸ä¿®æ”¹æ ¸å¿ƒé€»è¾‘
- **æ€§èƒ½æ ‡å‡†ç»´æŠ¤**ï¼šä¿æŒ60fpsæ¸²æŸ“ï¼Œç»Ÿè®¡åŠŸèƒ½å¼‚æ­¥å¤„ç†
- **é€‚é…ç³»ç»Ÿä¿æŠ¤**ï¼šä¸è§¦åŠæ ¸å¿ƒé€‚é…é€»è¾‘

## ğŸ® éš¾åº¦ç³»ç»Ÿè®¾è®¡

### å½¢çŠ¶é€‰æ‹©ç³»ç»Ÿ

æ¸¸æˆæä¾›ä¸‰ç§ä¸åŒéš¾åº¦çš„å½¢çŠ¶ä¾›ç©å®¶é€‰æ‹©ï¼š

| å½¢çŠ¶ç±»å‹ | å›¾æ ‡ | éš¾åº¦ç³»æ•° | ç‰¹ç‚¹æè¿° |
|---------|------|---------|----------|
| å¤šè¾¹å½¢ (Polygon) | â¬¢ï¸ | 1.0 | æ ‡å‡†éš¾åº¦ï¼Œè¾¹ç¼˜è§„åˆ™ï¼Œé€‚åˆæ–°æ‰‹ |
| äº‘æœµå½¢ (Cloud) | â˜ï¸ | 1.1 | æ›²çº¿è¾¹ç¼˜å¢åŠ åŒ¹é…éš¾åº¦ï¼Œåˆçº§æŒ‘æˆ˜ |
| é”¯é½¿å½¢ (Jagged) | âš¡ | 1.05 | è¾¹ç¼˜ä¸è§„åˆ™ä½†å½¢çŠ¶ç‹¬ç‰¹æ›´æ˜“è¯†åˆ« |

> **è®¾è®¡ç†å¿µï¼ˆv3.2 å¹³è¡¡ä¼˜åŒ–ï¼‰**ï¼š
> - **äº‘æœµå½¢**ï¼šæŸ”å’Œæ›²çº¿è®©æ‹¼å›¾å—è¾¹ç¼˜ç›¸ä¼¼ï¼ŒåŒ¹é…æ—¶éœ€è¦æ›´ä»”ç»†åˆ¤æ–­ï¼Œå¢åŠ 10%éš¾åº¦
> - **é”¯é½¿å½¢**ï¼šè™½ç„¶è¾¹ç¼˜ä¸è§„åˆ™ï¼Œä½†ç‹¬ç‰¹çš„å°–åˆºå½¢çŠ¶åè€Œè®©æ¯å—æ‹¼å›¾æ›´å®¹æ˜“è¯†åˆ«ï¼Œä»…å¢åŠ 5%éš¾åº¦
> - éš¾åº¦ç³»æ•°å½±å“æœ€ç»ˆå¾—åˆ†ï¼Œé¼“åŠ±ç©å®¶æŒ‘æˆ˜ä¸åŒå½¢çŠ¶

### éš¾åº¦çº§åˆ«ä¸æ‹¼å›¾æ•°é‡æ˜ å°„

> **é‡è¦è¯´æ˜**ï¼šç©å®¶é€‰æ‹©éš¾åº¦1-8ï¼Œç³»ç»Ÿæ ¹æ®éš¾åº¦çº§åˆ«ç”Ÿæˆå¯¹åº”æ•°é‡çš„åˆ‡å‰²çº¿ï¼Œæœ€ç»ˆæ‹¼å›¾æ•°é‡åœ¨è®¾å®šèŒƒå›´å†…æ³¢åŠ¨ã€‚

| éš¾åº¦çº§åˆ« | targetCuts | pieceRange | éš¾åº¦åˆ†ç±» | åŸºç¡€åˆ†æ•° | éš¾åº¦ç³»æ•° |
|---------|------------|------------|---------|---------|---------|
| 1       | 2æ¡        | 3-4ç‰‡      | å…¥é—¨     | 500     | 1.0     |
| 2       | 3æ¡        | 4-6ç‰‡      | ç®€å•     | 800     | 1.2     |
| 3       | 4æ¡        | 5-8ç‰‡      | åˆçº§     | 1200    | 1.5     |
| 4       | 6æ¡        | 7-12ç‰‡     | ä¸­çº§     | 1800    | 1.8     |
| 5       | 8æ¡        | 9-16ç‰‡     | ä¸­é«˜çº§   | 2500    | 2.2     |
| 6       | 10æ¡       | 11-20ç‰‡    | é«˜çº§     | 3500    | 2.8     |
| 7       | 12æ¡       | 13-24ç‰‡    | ä¸“å®¶     | 5000    | 3.5     |
| 8       | 15æ¡       | 16-30ç‰‡    | å¤§å¸ˆ     | 8000    | 5.0     |

#### å®é™…æ‹¼å›¾æ•°é‡ï¼ˆv3.2 éªŒè¯æ•°æ®ï¼‰

| éš¾åº¦ | ç›´çº¿åˆ‡å‰² | æ–œçº¿åˆ‡å‰² | æ›²çº¿åˆ‡å‰² |
|-----|---------|---------|---------|
| 8   | ~31å—   | ~31å—   | ~30å— âœ… |
| 5   | ~16å—   | ~16å—   | ~16å—   |
| 3   | ~8å—    | ~8å—    | ~8å—    |

> **v3.2 ä¿®å¤ç¡®è®¤**ï¼šæ›²çº¿åˆ‡å‰²ç°åœ¨èƒ½å¤Ÿäº§ç”Ÿä¸ç›´çº¿/æ–œçº¿ç›¸è¿‘æ•°é‡çš„æ‹¼å›¾ã€‚

### éš¾åº¦é…ç½®è¯¦æƒ…

```typescript
// æ¥è‡ª cutGeneratorConfig.ts çš„å®é™…é…ç½®
const DIFFICULTY_SETTINGS = {
  1: { targetCuts: 2,  pieceRange: { min: 3, max: 4 },   baseScore: 500,  label: 'å…¥é—¨éš¾åº¦' },
  2: { targetCuts: 3,  pieceRange: { min: 4, max: 6 },   baseScore: 800,  label: 'ç®€å•éš¾åº¦' },
  3: { targetCuts: 4,  pieceRange: { min: 5, max: 8 },   baseScore: 1200, label: 'åˆçº§éš¾åº¦' },
  4: { targetCuts: 6,  pieceRange: { min: 7, max: 12 },  baseScore: 1800, label: 'ä¸­çº§éš¾åº¦' },
  5: { targetCuts: 8,  pieceRange: { min: 9, max: 16 },  baseScore: 2500, label: 'ä¸­é«˜çº§éš¾åº¦' },
  6: { targetCuts: 10, pieceRange: { min: 11, max: 20 }, baseScore: 3500, label: 'é«˜çº§éš¾åº¦' },
  7: { targetCuts: 12, pieceRange: { min: 13, max: 24 }, baseScore: 5000, label: 'ä¸“å®¶éš¾åº¦' },
  8: { targetCuts: 15, pieceRange: { min: 16, max: 30 }, baseScore: 8000, label: 'å¤§å¸ˆéš¾åº¦' }
}
```

#### åˆ‡å‰²ç±»å‹ä½¿ç”¨é…ç½®çš„æ–¹å¼

```typescript
// ç›´çº¿/æ–œçº¿åˆ‡å‰²ï¼ˆcutGeneratorController.tsï¼‰
const cuts = generateCuts(shape, difficulty, cutType);
// ä½¿ç”¨ targetCuts æ¡åˆ‡å‰²çº¿ï¼Œäº’ç›¸äº¤å‰äº§ç”Ÿçº¦ 2Ã—targetCuts å—æ‹¼å›¾

// æ›²çº¿åˆ‡å‰²ï¼ˆNetworkCutter.ts - v3.2ä¿®å¤ï¼‰
const radialCount = pieceRange.max;  // ä½¿ç”¨ pieceRange.max è€Œé targetCuts
// æ”¾å°„çŠ¶æ›²çº¿ä¸äº¤å‰ï¼Œnæ¡çº¿äº§ç”Ÿçº¦nå—æ‰‡å½¢æ‹¼å›¾
```

### åˆ‡å‰²ç±»å‹è¯¦è§£

æ¸¸æˆæä¾›ä¸‰ç§åˆ‡å‰²ç±»å‹ï¼Œæ¯ç§äº§ç”Ÿä¸åŒå½¢çŠ¶çš„æ‹¼å›¾ï¼š

| åˆ‡å‰²ç±»å‹ | å›¾æ ‡ | éš¾åº¦ç³»æ•° | æ‹¼å›¾å½¢çŠ¶ | åˆ‡å‰²ç‰¹ç‚¹ |
|---------|------|---------|---------|---------|
| ç›´çº¿ (Straight) | â” | 1.0 | æ–¹å½¢/çŸ©å½¢ | æ°´å¹³å’Œå‚ç›´åˆ‡å‰²çº¿äº’ç›¸äº¤å‰ |
| æ–œçº¿ (Diagonal) | â•² | 1.15 | ä¸‰è§’å½¢/è±å½¢ | 45åº¦è§’æ–œçº¿äº’ç›¸äº¤å‰ |
| æ›²çº¿ (Curve) | ã€° | 1.25 | æ‰‡å½¢ | ä»ä¸­å¿ƒå‘å¤–å‘å°„çš„æ”¾å°„çŠ¶æ›²çº¿ |

#### åˆ‡å‰²ç±»å‹ç³»æ•°

```typescript
// åˆ‡å‰²ç±»å‹éš¾åº¦ç³»æ•°ï¼ˆv3.2 å¹³è¡¡ä¼˜åŒ–ç‰ˆï¼‰
const CUT_TYPE_MULTIPLIERS = {
  straight: 1.0,   // ç›´çº¿åˆ‡å‰²ï¼šæ ‡å‡†éš¾åº¦
  diagonal: 1.15,  // æ–œçº¿åˆ‡å‰²ï¼šå¢åŠ 15%éš¾åº¦
  curve: 1.25      // æ›²çº¿åˆ‡å‰²ï¼šå¢åŠ 25%éš¾åº¦
}
```

#### åˆ‡å‰²ç®—æ³•å·®å¼‚ï¼ˆé‡è¦ï¼‰

| åˆ‡å‰²ç±»å‹ | ç®—æ³• | åˆ‡å‰²çº¿æ•°é‡ | æ‹¼å›¾æ•°é‡å…¬å¼ | éš¾åº¦8ç¤ºä¾‹ |
|---------|------|-----------|-------------|----------|
| ç›´çº¿/æ–œçº¿ | äº’ç›¸äº¤å‰ | `targetCuts` | çº¦ 2n å— | 15æ¡çº¿ â†’ ~31å— |
| æ›²çº¿ | æ”¾å°„çŠ¶ | `pieceRange.max` | çº¦ n å— | 30æ¡çº¿ â†’ ~30å— |

> **v3.2 å¹³è¡¡è¯´æ˜**ï¼š
> - **æ›²çº¿åˆ‡å‰²**ç³»æ•°ä»1.5é™ä½åˆ°1.25ï¼Œå› ä¸ºä¿®å¤åæ›²çº¿åˆ‡å‰²ä¸ç›´çº¿/æ–œçº¿äº§ç”Ÿç›¸ä¼¼æ•°é‡çš„æ‹¼å›¾
> - **æ–œçº¿åˆ‡å‰²**ç³»æ•°ä»1.2é™ä½åˆ°1.15ï¼Œå› ä¸ºä¸‰è§’å½¢æ‹¼å›¾å½¢çŠ¶ç‹¬ç‰¹ï¼Œå®é™…è¯†åˆ«éš¾åº¦ä¸å¦‚æƒ³è±¡ä¸­é«˜
> - æ›²çº¿è¾¹ç¼˜ç¡®å®å¢åŠ äº†å¯¹é½éš¾åº¦ï¼Œä¿ç•™è¾ƒé«˜ç³»æ•°ä½†æ›´åŠ åˆç†
>
> **æ›²çº¿åˆ‡å‰²æŠ€æœ¯è¯´æ˜**ï¼š
> - ç›´çº¿/æ–œçº¿ï¼šnæ¡**äº’ç›¸äº¤å‰**çš„åˆ‡å‰²çº¿ â†’ äº§ç”Ÿçº¦2nå—æ‹¼å›¾
> - æ›²çº¿ï¼šnæ¡**ä»ä¸­å¿ƒå‘å¤–**çš„æ”¾å°„çº¿ â†’ äº§ç”Ÿçº¦nå—æ‰‡å½¢æ‹¼å›¾ï¼ˆä¸äº¤å‰ï¼‰
> - å› æ­¤æ›²çº¿åˆ‡å‰²ä½¿ç”¨ `pieceRange.max`ï¼ˆè€Œé `targetCuts`ï¼‰ä½œä¸ºæ”¾å°„çº¿æ•°é‡ï¼Œç¡®ä¿æ‹¼å›¾æ•°é‡å¹³è¡¡

### å½¢çŠ¶éš¾åº¦ç³»æ•°

```typescript
// å½¢çŠ¶éš¾åº¦ç³»æ•°ï¼ˆv3.2 å¹³è¡¡ä¼˜åŒ–ç‰ˆï¼‰
const SHAPE_MULTIPLIER = {
  polygon: 1.0,   // å¤šè¾¹å½¢ï¼šæ ‡å‡†éš¾åº¦
  cloud: 1.1,     // äº‘æœµå½¢ï¼šå¢åŠ 10%éš¾åº¦ï¼ˆæ›²çº¿è¾¹ç¼˜å¢åŠ åŒ¹é…éš¾åº¦ï¼‰
  jagged: 1.05    // é”¯é½¿å½¢ï¼šå¢åŠ 5%éš¾åº¦ï¼ˆç‹¬ç‰¹å½¢çŠ¶åè€Œæ›´å®¹æ˜“è¯†åˆ«ï¼‰
}
```

> **v3.2 å¹³è¡¡è¯´æ˜**ï¼šé”¯é½¿å½¢ç³»æ•°ä»1.2é™ä½åˆ°1.05ï¼Œå› ä¸ºå®é™…æ¸¸æˆä½“éªŒä¸­ï¼Œä¸è§„åˆ™çš„å°–åˆºè¾¹ç¼˜è®©æ¯å—æ‹¼å›¾å½¢çŠ¶æ›´ç‹¬ç‰¹ï¼Œåè€Œæ›´å®¹æ˜“è¢«è¯†åˆ«å’ŒåŒ¹é…ã€‚

### è®¾å¤‡é€‚é…ç³»æ•°

```typescript
// è®¾å¤‡éš¾åº¦ç³»æ•°ï¼ˆä¸useDeviceDetectionä¿æŒä¸€è‡´ï¼‰
const DEVICE_MULTIPLIER = {
  desktop: 1.0,     // æ¡Œé¢ç«¯ï¼šæ ‡å‡†éš¾åº¦
  ipad: 1.0,        // iPadï¼šæ ‡å‡†éš¾åº¦  
  mobile: 1.1       // ç§»åŠ¨ç«¯ï¼ˆæ¨ªå±+ç«–å±ï¼‰ï¼šç»Ÿä¸€1.1å€éš¾åº¦
}
```

### æœ€ç»ˆéš¾åº¦ç³»æ•°å…¬å¼

```typescript
finalMultiplier = baseDifficultyMultiplier Ã— cutTypeMultiplier Ã— deviceMultiplier Ã— shapeMultiplier
```

#### ç¤ºä¾‹è®¡ç®—ï¼ˆv3.2 éªŒè¯ï¼‰

| é…ç½®ç»„åˆ | åŸºç¡€ | åˆ‡å‰² | è®¾å¤‡ | å½¢çŠ¶ | æœ€ç»ˆç³»æ•° |
|---------|------|------|------|------|---------|
| éš¾åº¦8 + ç›´çº¿ + æ¡Œé¢ + å¤šè¾¹å½¢ | 5.0 | 1.0 | 1.0 | 1.0 | **5.0** |
| éš¾åº¦8 + æ–œçº¿ + æ¡Œé¢ + å¤šè¾¹å½¢ | 5.0 | 1.15 | 1.0 | 1.0 | **5.75** |
| éš¾åº¦8 + æ›²çº¿ + æ¡Œé¢ + å¤šè¾¹å½¢ | 5.0 | 1.25 | 1.0 | 1.0 | **6.25** |
| éš¾åº¦8 + æ›²çº¿ + æ¡Œé¢ + äº‘æœµ | 5.0 | 1.25 | 1.0 | 1.1 | **6.875** |
| éš¾åº¦8 + æ›²çº¿ + ç§»åŠ¨ç«¯ + é”¯é½¿ | 5.0 | 1.25 | 1.1 | 1.05 | **7.22** |
| éš¾åº¦5 + æ›²çº¿ + ç§»åŠ¨ç«¯ + é”¯é½¿ | 2.2 | 1.25 | 1.1 | 1.05 | **3.18** |

> **å¯¹æ¯”æ—§ç‰ˆæœ¬ v3.1**ï¼š
> - éš¾åº¦5+æ›²çº¿+ç§»åŠ¨ç«¯+é”¯é½¿å½¢ï¼šæ—§ç³»æ•°=4.356ï¼Œæ–°ç³»æ•°=3.18ï¼Œ**é™ä½çº¦27%**
> - åŸå› ï¼šæ›²çº¿ç³»æ•°ä»1.5â†’1.25ï¼Œæ–œçº¿ç³»æ•°ä»1.2â†’1.15ï¼Œé”¯é½¿ç³»æ•°ä»1.2â†’1.05

## ğŸ“Š åˆ†æ•°è®¡ç®—ç³»ç»Ÿ

### 1. åŸºç¡€åˆ†æ•°ç³»ç»Ÿ

åŸºäºåˆ‡å‰²æ¬¡æ•°ï¼ˆéš¾åº¦çº§åˆ«ï¼‰çš„å›ºå®šåŸºç¡€åˆ†æ•°ï¼š

```typescript
const BASE_SCORES_BY_DIFFICULTY = {
  1: 500,    // 1æ¬¡åˆ‡å‰²
  2: 800,    // 2æ¬¡åˆ‡å‰²
  3: 1200,   // 3æ¬¡åˆ‡å‰²
  4: 1800,   // 4æ¬¡åˆ‡å‰²
  5: 2500,   // 5æ¬¡åˆ‡å‰²
  6: 3500,   // 6æ¬¡åˆ‡å‰²
  7: 5000,   // 7æ¬¡åˆ‡å‰²
  8: 8000    // 8æ¬¡åˆ‡å‰²
}
```

### 2. é€Ÿåº¦å¥–åŠ±ç³»ç»Ÿ

åŸºäºå®Œæˆæ—¶é—´çš„å›ºå®šé˜ˆå€¼å¥–åŠ±ï¼š

| æ—¶é—´é˜ˆå€¼ | å¥–åŠ±åˆ†æ•° | æè¿° |
|---------|---------|------|
| â‰¤ 10ç§’  | +600åˆ†  | 10ç§’å†…å®Œæˆ |
| â‰¤ 30ç§’  | +400åˆ†  | 30ç§’å†…å®Œæˆ |
| â‰¤ 60ç§’  | +300åˆ†  | 60ç§’å†…å®Œæˆ |
| â‰¤ 90ç§’  | +200åˆ†  | 1åˆ†30ç§’å†…å®Œæˆ |
| â‰¤ 120ç§’ | +100åˆ†  | 2åˆ†é’Ÿå†…å®Œæˆ |
| > 120ç§’ | +0åˆ†    | è¶…è¿‡2åˆ†é’Ÿ |

**ç‰¹ç‚¹**ï¼š
- ç®€å•æ˜äº†ï¼šåŸºäºæ—¶é—´é˜ˆå€¼ï¼Œç”¨æˆ·å®¹æ˜“ç†è§£
- é¼“åŠ±æ•ˆç‡ï¼šæ—¶é—´è¶ŠçŸ­å¥–åŠ±è¶Šé«˜
- å¹³è¡¡è®¾è®¡ï¼šé¿å…è¿‡åº¦è¿½æ±‚é€Ÿåº¦è€Œå¿½ç•¥ç­–ç•¥

### 3. æ—‹è½¬æ•ˆç‡è¯„åˆ†ç³»ç»Ÿï¼ˆv3.0 æ–°ç®—æ³•ï¼‰

#### ç®—æ³•è®¾è®¡ç†å¿µ

é‡‡ç”¨"å®Œç¾æ—‹è½¬å¥–åŠ± + è¶…å‡ºæ—‹è½¬æƒ©ç½š"ç®—æ³•ï¼š

- **å®Œç¾æ—‹è½¬**ï¼šå®é™…æ—‹è½¬æ¬¡æ•° = æœ€å°æ—‹è½¬æ¬¡æ•° â†’ **+500åˆ†**
- **è¶…å‡ºæ—‹è½¬**ï¼šæ¯è¶…å‡º1æ¬¡æ—‹è½¬ â†’ **-10åˆ†**
- **é›¶æ—‹è½¬å®Œç¾**ï¼šä¸éœ€è¦æ—‹è½¬ä¸”æ²¡æœ‰æ—‹è½¬ â†’ **+500åˆ†**

#### æœ€ä¼˜è§£è®¡ç®—

```typescript
// è®¡ç®—æ•£å¼€åæ¯ä¸ªæ‹¼å›¾çš„æœ€å°æ—‹è½¬æ¬¡æ•°
const calculateMinimumRotationsAtStart = (pieces: PuzzlePiece[]): number => {
  return pieces.reduce((total, piece) => {
    let scatteredAngle = piece.rotation % 360;
    if (scatteredAngle < 0) scatteredAngle += 360;
    
    // è§„åˆ™ï¼šâ‰¤180åº¦ç”¨é€†æ—¶é’ˆï¼Œ>180åº¦ç”¨é¡ºæ—¶é’ˆ
    let minRotations: number;
    if (scatteredAngle <= 180) {
      minRotations = Math.ceil(scatteredAngle / 15);  // é€†æ—¶é’ˆåˆ°0åº¦
    } else {
      const clockwiseAngle = 360 - scatteredAngle;
      minRotations = Math.ceil(clockwiseAngle / 15);  // é¡ºæ—¶é’ˆåˆ°0åº¦
    }
    
    return total + minRotations;
  }, 0);
};
```

#### è¯„åˆ†ç®—æ³•

```typescript
const calculateNewRotationScore = (actualRotations: number, minRotations: number): number => {
  if (actualRotations === minRotations) {
    return 500;  // å®Œç¾æ—‹è½¬ï¼š+500åˆ†
  } else {
    const excessRotations = actualRotations - minRotations;
    return -excessRotations * 10;  // è¶…å‡ºæ—‹è½¬ï¼šæ¯æ¬¡-10åˆ†
  }
};
```

#### è¯„åˆ†æ ‡å‡†è¡¨

| æƒ…å†µ | åˆ†æ•°è®¡ç®— | ç¤ºä¾‹ | æè¿° |
|------|---------|------|------|
| å®Œç¾æ—‹è½¬ | +500åˆ† | 10/10æ¬¡ â†’ +500åˆ† | å®é™…æ—‹è½¬ = æœ€å°æ—‹è½¬ |
| è¶…å‡º1æ¬¡ | -10åˆ† | 11/10æ¬¡ â†’ -10åˆ† | æ¯è¶…å‡º1æ¬¡æ‰£10åˆ† |
| è¶…å‡º5æ¬¡ | -50åˆ† | 15/10æ¬¡ â†’ -50åˆ† | 5æ¬¡è¶…å‡º Ã— 10åˆ† |
| é›¶æ—‹è½¬å®Œç¾ | +500åˆ† | 0/0æ¬¡ â†’ +500åˆ† | ä¸éœ€è¦æ—‹è½¬ä¸”æ²¡æœ‰æ—‹è½¬ |
| ä¸å¿…è¦æ—‹è½¬ | è´Ÿåˆ† | 3/0æ¬¡ â†’ -30åˆ† | ä¸éœ€è¦æ—‹è½¬ä½†è¿›è¡Œäº†æ—‹è½¬ |

### 4. æç¤ºå¹³è¡¡æœºåˆ¶

#### ç»Ÿä¸€èµ é€ç³»ç»Ÿ

```typescript
const HINT_CONFIG = {
  freeHintsPerGame: 3,      // æ‰€æœ‰éš¾åº¦ç»Ÿä¸€3æ¬¡å…è´¹æç¤º
  zeroHintBonus: 500,       // é›¶æç¤ºå¥–åŠ±åˆ†æ•°
  excessHintPenalty: 25     // è¶…å‡ºæ¯æ¬¡çš„æ‰£åˆ†
};
```

#### æç¤ºè¯„åˆ†æœºåˆ¶

```typescript
const calculateHintScore = (actualHints: number, allowance: number): number => {
  if (actualHints === 0) {
    return 500;  // é›¶æç¤ºå®Œæˆï¼š+500åˆ†å¥–åŠ±
  }
  
  if (actualHints <= allowance) {
    return 0;    // åœ¨èµ é€èŒƒå›´å†…ï¼šæ— æƒ©ç½š
  }
  
  // è¶…å‡ºèµ é€æ¬¡æ•°ï¼šæ¯æ¬¡æ‰£25åˆ†
  const excessHints = actualHints - allowance;
  return -excessHints * 25;
};
```

#### è®¾è®¡ä¼˜åŠ¿

- **ç®€åŒ–ç†è§£**ï¼šæ‰€æœ‰éš¾åº¦éƒ½æ˜¯3æ¬¡ï¼Œç”¨æˆ·æ— éœ€è®°å¿†å¤æ‚è§„åˆ™
- **å¹³è¡¡ä½“éªŒ**ï¼š3æ¬¡æç¤ºæ—¢èƒ½å¸®åŠ©æ–°æ‰‹ï¼Œåˆä¿æŒæŒ‘æˆ˜æ€§
- **é¼“åŠ±è‡ªå¾‹**ï¼šè®©ç©å®¶è‡ªå·±æ§åˆ¶ä½¿ç”¨ï¼ŒåŸ¹å…»è§£è°œæŠ€å·§
- **é«˜é¢å¥–åŠ±**ï¼šé›¶æç¤ºå®Œæˆ+500åˆ†ï¼Œå¼ºçƒˆåˆºæ¿€æŒ‘æˆ˜æ¬²æœ›

## ğŸ† æœ€ç»ˆåˆ†æ•°è®¡ç®—å…¬å¼

```typescript
const calculateFinalScore = (stats: GameStats, pieces: PuzzlePiece[]): ScoreBreakdown => {
  // 1. åŸºç¡€åˆ†æ•°
  const baseScore = BASE_SCORES_BY_DIFFICULTY[stats.difficulty.cutCount];
  
  // 2. é€Ÿåº¦å¥–åŠ±
  const timeBonus = calculateTimeBonus(stats).timeBonus;
  
  // 3. æ—‹è½¬æ•ˆç‡è¯„åˆ†
  const minRotations = stats.minRotations; // æ¸¸æˆå¼€å§‹æ—¶ä¿å­˜çš„å€¼
  const rotationScore = calculateNewRotationScore(stats.totalRotations, minRotations);
  
  // 4. æç¤ºä½¿ç”¨è¯„åˆ†
  const hintScore = calculateHintScore(stats.hintUsageCount, 3);
  
  // 5. éš¾åº¦ç³»æ•°ï¼ˆåŒ…å«å½¢çŠ¶ç³»æ•°ï¼‰
  const difficultyMultiplier = calculateDifficultyMultiplier(stats.difficulty);
  
  // 6. æœ€ç»ˆåˆ†æ•°
  const subtotal = baseScore + timeBonus + rotationScore + hintScore;
  const finalScore = Math.max(100, Math.round(subtotal * difficultyMultiplier));
  
  return { baseScore, timeBonus, rotationScore, hintScore, difficultyMultiplier, finalScore };
};
```

## ğŸ¨ æ‹¼å›¾åˆ†å¸ƒç³»ç»Ÿ

### åˆ†å¸ƒå› å­è®¡ç®—

```typescript
// æ ¹æ®éš¾åº¦åŠ¨æ€è®¡ç®—åˆ†å¸ƒå› å­
let distributionFactor: number;

if (difficulty <= 3) {
  // ä½éš¾åº¦(1-3ç‰‡)æ‹¼å›¾æ›´é›†ä¸­
  distributionFactor = 0.7 - ((difficulty - 1) * 0.05);
} else if (difficulty <= 6) {
  // ä¸­ç­‰éš¾åº¦(4-6ç‰‡)
  distributionFactor = 0.8 + ((difficulty - 4) * 0.05);
} else {
  // é«˜éš¾åº¦(7-8ç‰‡)ä½¿ç”¨å…¨éƒ¨ç©ºé—´æˆ–æ›´å¤§èŒƒå›´
  distributionFactor = difficulty === 7 ? 1.0 : 1.1;
}
```

### æ—‹è½¬è§’åº¦è®¾è®¡

#### ç§»åŠ¨è®¾å¤‡ï¼ˆç«–å±æ¨¡å¼ï¼‰

é‡‡ç”¨ç®€åŒ–çš„90åº¦å€æ•°æ—‹è½¬ï¼š

```typescript
// ç®€å•éš¾åº¦(1-3)ï¼šå¸¸ç”¨0åº¦æˆ–90åº¦
const rotationOptions = [0, 0, 90, 90];

// ä¸­ç­‰éš¾åº¦(4-6)ï¼šä½¿ç”¨0ã€90ã€180åº¦
const rotationOptions = [0, 90, 90, 180];

// é«˜éš¾åº¦(7+)ï¼šä½¿ç”¨0ã€90ã€180ã€270åº¦
const rotationOptions = [0, 90, 180, 270];
```

#### æ¡Œé¢ç«¯å’Œç§»åŠ¨è®¾å¤‡æ¨ªå±

ä½¿ç”¨ç²¾ç»†çš„15åº¦å¢é‡æ—‹è½¬ï¼š

```typescript
// ç®€å•éš¾åº¦ï¼š0-45åº¦ï¼Œ15åº¦å€æ•°
rotation = Math.floor(Math.random() * 4) * 15;

// ä¸­ç­‰éš¾åº¦ï¼š0-90åº¦ï¼Œ15åº¦å€æ•°
rotation = Math.floor(Math.random() * 7) * 15;

// é«˜éš¾åº¦ï¼š0-180åº¦ï¼Œ15åº¦å€æ•°
rotation = Math.floor(Math.random() * 13) * 15;

// æé«˜éš¾åº¦ï¼š0-345åº¦ï¼Œ15åº¦å€æ•°
rotation = Math.floor(Math.random() * 24) * 15;
```

## ğŸ“± è®¾å¤‡é€‚é…ç­–ç•¥

### è®¾å¤‡æ£€æµ‹æœºåˆ¶

```typescript
const getDeviceMultiplier = (): number => {
  const userAgent = navigator.userAgent;
  const screenWidth = window.innerWidth;
  
  // æ£€æµ‹ç§»åŠ¨è®¾å¤‡ï¼ˆä¸useDeviceDetectionä¿æŒä¸€è‡´ï¼‰
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
  const isIOS = /iPad|iPhone|iPod/.test(userAgent);
  const isTouchDevice = 'ontouchstart' in window;
  
  // iPadæ£€æµ‹
  const isIPad = /iPad/i.test(userAgent) || 
    (isIOS && screenWidth >= 768) ||
    (isTouchDevice && screenWidth >= 768 && screenWidth <= 1366);
  
  // ç§»åŠ¨è®¾å¤‡æ£€æµ‹ï¼ˆæ’é™¤iPadï¼‰
  const isMobileDevice = isMobile && !isIPad;
  
  return isMobileDevice ? 1.1 : 1.0;
};
```

### ç§»åŠ¨è®¾å¤‡ï¼ˆç«–å±ï¼‰ä¼˜åŒ–

1. **ç”»å¸ƒå°ºå¯¸**ï¼šå¼ºåˆ¶æ­£æ–¹å½¢ç”»å¸ƒï¼Œé™åˆ¶æœ€å¤§å°ºå¯¸
2. **æ‹¼å›¾åˆ†å¸ƒ**ï¼šæ›´ç´§å‡‘çš„ç½‘æ ¼ç³»ç»Ÿï¼Œå¢å¤§å®‰å…¨è¾¹è·
3. **æ‹¼å›¾ç¼©æ”¾**ï¼šè‡ªåŠ¨ç¼©å°è¿‡å¤§æ‹¼å›¾ï¼Œæœ€å¤§ç¼©æ”¾åˆ°80%
4. **æ—‹è½¬ç®€åŒ–**ï¼šä½¿ç”¨90åº¦å€æ•°ï¼Œå‡å°‘è§†è§‰æ··ä¹±
5. **è¾¹ç•Œçº¦æŸ**ï¼šæ›´ä¸¥æ ¼çš„è¾¹ç•Œæ£€æŸ¥

## ğŸ“ˆ å®æ—¶åˆ†æ•°æ˜¾ç¤º

### å®æ—¶åˆ†æ•°è®¡ç®—

```typescript
const calculateLiveScore = (stats: GameStats): number => {
  // å®æ—¶åˆ†æ•° = åŸºç¡€åˆ†æ•° + é€Ÿåº¦å¥–åŠ± + æ—‹è½¬åˆ†æ•° + æç¤ºåˆ†æ•°
  // æ³¨æ„ï¼šå®æ—¶åˆ†æ•°ä¸åº”ç”¨éš¾åº¦ç³»æ•°ï¼Œåªæœ‰æœ€ç»ˆåˆ†æ•°æ‰åº”ç”¨
  const subtotal = baseScore + timeBonus + rotationScore + hintScore;
  return Math.max(100, Math.round(subtotal));
};
```

### æ˜¾ç¤ºç»„ä»¶è®¾è®¡

#### ç”»å¸ƒæ˜¾ç¤ºå…ƒç´ 
- **å·¦ä¸Šè§’**ï¼šè®¡æ—¶å™¨ï¼ˆmm:ssæ ¼å¼ï¼‰
- **å³ä¸Šè§’**ï¼šå®æ—¶åˆ†æ•°ï¼ˆåƒåˆ†ä½åˆ†éš”ç¬¦æ ¼å¼ï¼‰

#### å®Œæˆç»Ÿè®¡é¢æ¿
- æœ€ç»ˆå¾—åˆ†ï¼ˆå¤§å·æ˜¾ç¤ºï¼‰
- åˆ†æ•°è¯¦æƒ…åˆ†è§£
- æ•ˆç‡ç»Ÿè®¡ä¿¡æ¯
- é‡æ–°å¼€å§‹æŒ‰é’®

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

### è®¡ç®—ä¼˜åŒ–
- **å¼‚æ­¥è®¡ç®—**ï¼šåˆ†æ•°è®¡ç®—åœ¨`requestIdleCallback`ä¸­è¿›è¡Œ
- **ç¼“å­˜æœºåˆ¶**ï¼šæœ€ä¼˜è§£è®¡ç®—ç»“æœç¼“å­˜
- **é˜²æŠ–å¤„ç†**ï¼šå®æ—¶åˆ†æ•°æ›´æ–°ä½¿ç”¨100msé˜²æŠ–

```typescript
const createLiveScoreUpdater = (updateCallback, debounceMs = 100) => {
  const debouncedUpdate = debounce((stats, leaderboard) => {
    const result = calculateScoreDelta(lastStats, stats, leaderboard);
    updateCallback(result.newScore, result.delta, result.reason);
  }, debounceMs);
  
  return { updateScore: debouncedUpdate, reset: () => lastStats = null };
};
```

### æ¸²æŸ“ä¼˜åŒ–
- **React.memo**ï¼šç»Ÿè®¡ç»„ä»¶ä½¿ç”¨memoä¼˜åŒ–
- **useMemo**ï¼šå¤æ‚è®¡ç®—ä½¿ç”¨memoç¼“å­˜
- **å¢é‡è®¡ç®—**ï¼šåªè®¡ç®—å˜åŒ–éƒ¨åˆ†

## ğŸ§ª æ•°æ®ç»“æ„å®šä¹‰

### æ¸¸æˆç»Ÿè®¡æ•°æ®

```typescript
interface GameStats {
  // æ—¶é—´ç»Ÿè®¡
  gameStartTime: number;
  gameEndTime?: number;
  totalDuration: number;

  // æ“ä½œç»Ÿè®¡
  totalRotations: number;
  hintUsageCount: number;
  dragOperations: number;

  // éš¾åº¦ä¿¡æ¯
  difficulty: DifficultyConfig;

  // æœ€ä¼˜è§£æ•°æ®ï¼ˆæ¸¸æˆå¼€å§‹æ—¶è®¡ç®—å¹¶ä¿å­˜ï¼‰
  minRotations: number;
  rotationEfficiency: number;
  hintAllowance: number;

  // è®¾å¤‡ä¿¡æ¯
  deviceType: 'desktop' | 'mobile-portrait' | 'mobile-landscape' | 'ipad';
  canvasSize: { width: number; height: number };
}
```

### åˆ†æ•°åˆ†è§£æ•°æ®

```typescript
interface ScoreBreakdown {
  baseScore: number;              // åŸºç¡€åˆ†æ•°
  timeBonus: number;              // é€Ÿåº¦å¥–åŠ±
  timeBonusRank: number;          // é€Ÿåº¦æ’å
  isTimeRecord: boolean;          // æ˜¯å¦æ–°è®°å½•
  rotationScore: number;          // æ—‹è½¬æ•ˆç‡åˆ†æ•°
  rotationEfficiency: number;     // æ—‹è½¬æ•ˆç‡ç™¾åˆ†æ¯”
  minRotations: number;           // æœ€å°æ—‹è½¬æ¬¡æ•°
  hintScore: number;              // æç¤ºä½¿ç”¨åˆ†æ•°
  hintAllowance: number;          // æç¤ºèµ é€æ¬¡æ•°
  difficultyMultiplier: number;   // éš¾åº¦ç³»æ•°
  finalScore: number;             // æœ€ç»ˆåˆ†æ•°
}
```

## ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿

### å…¬å¹³æ€§
- âœ… åŸºäºæœ€ä¼˜è§£çš„å®¢è§‚è¯„åˆ†
- âœ… ç»Ÿä¸€çš„æç¤ºèµ é€æœºåˆ¶
- âœ… è®¾å¤‡é€‚é…çš„éš¾åº¦å¹³è¡¡

### ç«äº‰æ€§
- âœ… å®æ—¶åˆ†æ•°åé¦ˆ
- âœ… é€Ÿåº¦å¥–åŠ±æœºåˆ¶
- âœ… æ•ˆç‡è¯„åˆ†æ¿€åŠ±

### æ•™è‚²æ€§
- âœ… æ˜¾ç¤ºæœ€ä¼˜è§£å¸®åŠ©å­¦ä¹ 
- âœ… æ•ˆç‡åé¦ˆä¿ƒè¿›æ”¹è¿›
- âœ… ç­–ç•¥æ€ç»´åŸ¹å…»

### ä½“éªŒæ€§
- âœ… ç›´è§‚çš„åˆ†æ•°è®¡ç®—
- âœ… ä¸°å¯Œçš„è§†è§‰åé¦ˆ
- âœ… å¹³æ»‘çš„æ€§èƒ½è¡¨ç°

### å¤šæ ·æ€§
- âœ… ä¸‰ç§å½¢çŠ¶é€‰æ‹©ï¼Œä¸åŒéš¾åº¦æŒ‘æˆ˜
- âœ… å½¢çŠ¶éš¾åº¦ç³»æ•°ï¼Œé¼“åŠ±æŒ‘æˆ˜é«˜éš¾åº¦
- âœ… ä¸ªæ€§åŒ–çš„æ¸¸æˆä½“éªŒ

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v1.0.0** (2025/08/22): åŸºç¡€åˆ†æ•°ç³»ç»Ÿè®¾è®¡
- **v2.0.0** (2025/08/29): æ–°æ—‹è½¬è¯„åˆ†ç®—æ³•
- **v2.1.0** (2025/09/01): æ ¸å¿ƒè®¡åˆ†ç³»ç»Ÿå®ç°
- **v3.0.0** (2025/09/09): ç»Ÿä¸€è§„åˆ™æ–‡æ¡£ï¼Œä¿®æ­£éš¾åº¦çº§åˆ«è¡¨æ ¼ï¼Œä¸ä»£ç å®ç°å®Œå…¨ä¸€è‡´
- **v3.1.0** (2025/09/28): æ–°å¢å½¢çŠ¶éš¾åº¦ç³»æ•°ï¼Œæ”¯æŒä¸‰ç§å½¢çŠ¶çš„ä¸åŒéš¾åº¦å¥–åŠ±ï¼Œç‰ˆæœ¬æ ‡è¯†åŒæ­¥
- **v3.2.0** (2025/12/26): **å¹³è¡¡ä¼˜åŒ–ç‰ˆ** - ä¿®å¤æ›²çº¿åˆ‡å‰²æ‹¼å›¾æ•°é‡é—®é¢˜ï¼Œé‡æ–°å¹³è¡¡éš¾åº¦ç³»æ•°
  - ğŸ”§ ä¿®å¤ï¼šæ›²çº¿åˆ‡å‰²ä½¿ç”¨ `pieceRange.max` ä½œä¸ºæ”¾å°„çº¿æ•°é‡ï¼ˆéš¾åº¦8æ—¶30æ¡ï¼‰ï¼Œäº§ç”Ÿä¸ç›´çº¿/æ–œçº¿ç›¸ä¼¼æ•°é‡çš„æ‹¼å›¾
  - ğŸ“ åŸç†ï¼šç›´çº¿/æ–œçº¿çš„næ¡çº¿äº’ç›¸äº¤å‰äº§ç”Ÿçº¦2nå—ï¼Œæ›²çº¿çš„næ¡æ”¾å°„çº¿äº§ç”Ÿçº¦nå—æ‰‡å½¢
  - âš–ï¸ å¹³è¡¡ï¼šæ›²çº¿åˆ‡å‰²ç³»æ•°ä»1.5é™ä½åˆ°1.25ï¼Œæ–œçº¿åˆ‡å‰²ç³»æ•°ä»1.2é™ä½åˆ°1.15
  - âš–ï¸ å¹³è¡¡ï¼šé”¯é½¿å½¢çŠ¶ç³»æ•°ä»1.2é™ä½åˆ°1.05ï¼ˆç‹¬ç‰¹å½¢çŠ¶åè€Œæ›´å®¹æ˜“è¯†åˆ«ï¼‰

## ğŸ”— æŠ€æœ¯å®ç°å‚è€ƒ

### æ ¸å¿ƒæ–‡ä»¶
- `utils/score/ScoreCalculator.ts` - åˆ†æ•°è®¡ç®—å¼•æ“ï¼ˆåŒ…å«å½¢çŠ¶ç³»æ•°å’Œåˆ‡å‰²ç±»å‹ç³»æ•°ï¼‰
- `utils/score/RotationEfficiencyCalculator.ts` - æ—‹è½¬æ•ˆç‡è®¡ç®—
- `utils/puzzle/cutGeneratorConfig.ts` - éš¾åº¦é…ç½®ç³»ç»Ÿ
- `utils/puzzle/cutGeneratorController.ts` - ç›´çº¿/æ–œçº¿åˆ‡å‰²ç”Ÿæˆæ§åˆ¶å™¨
- `utils/puzzle/graph/NetworkCutter.ts` - æ›²çº¿åˆ‡å‰²ç”Ÿæˆå¼•æ“ï¼ˆv3.2ä¿®å¤ï¼‰
- `utils/puzzle/ScatterPuzzle.ts` - æ‹¼å›¾åˆ†å¸ƒç³»ç»Ÿ
- `contexts/GameContext.tsx` - æ¸¸æˆçŠ¶æ€ç®¡ç†

### UIç»„ä»¶
- `components/ShapeControls.tsx` - å½¢çŠ¶é€‰æ‹©ç»„ä»¶
- `components/score/ScoreDisplay.tsx` - åˆ†æ•°æ˜¾ç¤ºç»„ä»¶
- `components/score/MobileScoreLayout.tsx` - ç§»åŠ¨ç«¯åˆ†æ•°å¸ƒå±€

### ç›¸å…³ Hooks
- `useDeviceDetection` - è®¾å¤‡æ£€æµ‹
- `useGameStats` - æ¸¸æˆç»Ÿè®¡
- `useScoreCalculation` - åˆ†æ•°è®¡ç®—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.2  
**åˆ›å»ºæ—¥æœŸ**: 2025/09/09  
**æœ€æ–°æ›´æ–°**: 2025/12/26 (å¹³è¡¡ä¼˜åŒ–ç‰ˆ)  
**åŸºå‡†ä»£ç **: utils/score/ScoreCalculator.ts + utils/puzzle/cutGeneratorConfig.ts + utils/puzzle/graph/NetworkCutter.ts  
**ä¸€è‡´æ€§çŠ¶æ€**: âœ… å®Œå…¨ä¸€è‡´  
**æƒå¨æ€§**: ğŸ”’ å”¯ä¸€æƒå¨è§„åˆ™æ–‡æ¡£  
**ç»´æŠ¤åŸåˆ™**: ä»£ç å…ˆè¡Œï¼Œæ–‡æ¡£è·Ÿéšï¼Œä¿æŒåŒæ­¥æ›´æ–°
