# éš¾åº¦é…ç½®ä¸åˆ‡å‰²ç®—æ³•

> ä¿®è®¢æ—¥æœŸï¼š2025-12-31 (v3.4 - ç»Ÿä¸€è§„åˆ™ç‰ˆ)

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜æ¸¸æˆéš¾åº¦ç³»ç»Ÿå’Œåˆ‡å‰²ç®—æ³•çš„é…ç½®å‚æ•°ï¼Œ**å®Œå…¨åŸºäº `docs/game-rules-unified.md` ç»Ÿä¸€è§„åˆ™**ã€‚

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

### ä¸»è¦é…ç½®æ–‡ä»¶
```
utils/puzzle/cutGeneratorConfig.ts # éš¾åº¦å…·ä½“é…ç½® (æ ¸å¿ƒäº‹å®æ¥æº)
utils/puzzle/cutGenerators.ts      # åˆ‡å‰²ç”Ÿæˆå™¨é€»è¾‘
utils/puzzle/graph/NetworkCutter.ts # å›¾å½¢åˆ‡å‰²ç®—æ³•
utils/score/ScoreCalculator.ts     # åˆ†æ•°è®¡ç®—å™¨
```

---

## ğŸ¯ éš¾åº¦çº§åˆ«é…ç½® (v3.4)

### éš¾åº¦æ˜ å°„è¡¨
åŸºäº `DIFFICULTY_SETTINGS` é…ç½®ï¼Œå®šä¹‰äº†8ä¸ªéš¾åº¦çº§åˆ«çš„åˆ‡å‰²çº¿æ•°é‡å’Œæ‹¼å›¾å—æ•°èŒƒå›´ã€‚

```typescript
// utils/puzzle/cutGeneratorConfig.ts
export const DIFFICULTY_SETTINGS = {
  1: { targetCuts: 2,  pieceRange: { min: 3, max: 4 },   baseScore: 500,  label: 'å…¥é—¨éš¾åº¦' },
  2: { targetCuts: 3,  pieceRange: { min: 4, max: 6 },   baseScore: 800,  label: 'ç®€å•éš¾åº¦' },
  3: { targetCuts: 4,  pieceRange: { min: 5, max: 8 },   baseScore: 1200, label: 'åˆçº§éš¾åº¦' },
  4: { targetCuts: 6,  pieceRange: { min: 7, max: 12 },  baseScore: 1800, label: 'ä¸­çº§éš¾åº¦' },
  5: { targetCuts: 8,  pieceRange: { min: 9, max: 16 },  baseScore: 2500, label: 'ä¸­é«˜çº§éš¾åº¦' },
  6: { targetCuts: 10, pieceRange: { min: 11, max: 20 }, baseScore: 3500, label: 'é«˜çº§éš¾åº¦' },
  7: { targetCuts: 12, pieceRange: { min: 13, max: 24 }, baseScore: 5000, label: 'ä¸“å®¶éš¾åº¦' },
  8: { targetCuts: 15, pieceRange: { min: 16, max: 30 }, baseScore: 8000, label: 'å¤§å¸ˆéš¾åº¦' }
};
```

---

## âš™ï¸ éš¾åº¦ç³»æ•°é…ç½®

### 1. åˆ‡å‰²ç±»å‹ç³»æ•° (Cut Type Multipliers)
åŸºäº v3.2 å¹³è¡¡ä¼˜åŒ–ç‰ˆæœ¬ã€‚

```typescript
export const CUT_TYPE_MULTIPLIERS = {
  straight: 1.0,   // ç›´çº¿åˆ‡å‰²ï¼šæ ‡å‡†éš¾åº¦
  diagonal: 1.15,  // æ–œçº¿åˆ‡å‰²ï¼šå¢åŠ 15%éš¾åº¦ (ä¸‰è§’å½¢è¯†åˆ«)
  curve: 1.25      // æ›²çº¿åˆ‡å‰²ï¼šå¢åŠ 25%éš¾åº¦ (æ”¾å°„çŠ¶æ‰‡å½¢)
};
```

### 2. å½¢çŠ¶éš¾åº¦ç³»æ•° (Shape Multipliers)
åŸºäº v3.2 å¹³è¡¡ä¼˜åŒ–ç‰ˆæœ¬ã€‚

```typescript
export const SHAPE_MULTIPLIER = {
  polygon: 1.0,   // å¤šè¾¹å½¢ï¼šæ ‡å‡†éš¾åº¦
  cloud: 1.1,     // äº‘æœµå½¢ï¼šå¢åŠ 10%éš¾åº¦ (æ›²çº¿è¾¹ç¼˜å¢åŠ åŒ¹é…éš¾åº¦)
  jagged: 1.05    // é”¯é½¿å½¢ï¼šå¢åŠ 5%éš¾åº¦ (ç‹¬ç‰¹å½¢çŠ¶æ˜“è¯†åˆ«)
};
```

### 3. è®¾å¤‡éš¾åº¦ç³»æ•° (Device Multipliers)

```typescript
export const DEVICE_MULTIPLIER = {
  desktop: 1.0,   // æ¡Œé¢ç«¯
  ipad: 1.0,      // iPadç«¯
  mobile: 1.1     // ç§»åŠ¨ç«¯ (æ“ä½œç©ºé—´å—é™ï¼Œç»™äºˆ1.1å€åŠ æˆ)
};
```

---

## ğŸ”ª åˆ‡å‰²ç®—æ³•é…ç½®

### ç®—æ³•ç­–ç•¥åŒºåˆ†

#### ç›´çº¿ä¸æ–œçº¿åˆ‡å‰² (Graph Network)
*   **ç­–ç•¥**: ä½¿ç”¨ `targetCuts` æ¡çº¿äº’ç›¸äº¤å‰ã€‚
*   **ç»“æœ**: äº§ç”Ÿçº¦ `2 * targetCuts` å—æ‹¼å›¾ã€‚
*   **é€»è¾‘**: çº¿æ®µåœ¨å®¹å™¨å†…éšæœºç”Ÿæˆï¼Œè®¡ç®—æ‰€æœ‰äº¤ç‚¹ï¼Œæ„å»ºå¤šè¾¹å½¢ç½‘ç»œã€‚

#### æ›²çº¿åˆ‡å‰² (Radial Slices)
*   **ç­–ç•¥**: ä½¿ç”¨ `pieceRange.max` ä½œä¸ºæ”¾å°„çº¿æ¡æ•°ã€‚
*   **ç»“æœ**: äº§ç”Ÿçº¦ `n` å—æ‹¼å›¾ (ä¸äº¤å‰)ã€‚
*   **é€»è¾‘**: ä»å‡ ä½•ä¸­å¿ƒå‘å¤–å‘å°„æ­£å¼¦/è´å¡å°”æ›²çº¿ï¼Œå½¢æˆæ‰‡å½¢åˆ‡ç‰‡ã€‚
*   **ä¼˜åŒ–**: v3.2 ç‰ˆæœ¬ä¿®å¤äº†æ•°é‡è¿‡å°‘çš„é—®é¢˜ï¼Œç°åœ¨é€šè¿‡ç›´æ¥ä½¿ç”¨æœ€å¤§ç‰‡æ•°æ¥å¹³è¡¡éš¾åº¦ã€‚

---

## âš¡ï¸ é€Ÿåº¦å¥–åŠ±é…ç½® (v3.4)

### åŠ¨æ€æ—¶é—´é˜ˆå€¼
ä¸å†ä½¿ç”¨å›ºå®šæ—¶é—´ï¼Œè€Œæ˜¯æ ¹æ®æ‹¼å›¾æ•°é‡åŠ¨æ€è®¡ç®—"æ ‡å‡†å®Œæˆæ—¶é—´"ã€‚

**æ¯ç‰‡å¹³å‡åŸºå‡†æ—¶é—´ (Avg Time Per Piece):**
*   éš¾åº¦ 1-2: **5ç§’** (ä¼˜åŒ–å)
*   éš¾åº¦ 3-4: **7ç§’**
*   éš¾åº¦ 5-6: **10ç§’**
*   éš¾åº¦ 7-8: **18ç§’**

### å¥–åŠ±å€ç‡ (Threshold Multipliers)
åŸºäºåŸºç¡€æ—¶é—´ (`count * avgTime`) çš„å€æ•°åˆ¤å®šç­‰çº§ï¼š

| ç­‰çº§ | æ—¶é—´å€æ•° | åŸºç¡€å¥–åŠ±åˆ† |
|------|---------|-----------|
| æé€Ÿ | < 1.0x | 600 |
| å¿«é€Ÿ | < 1.3x | 400 |
| è‰¯å¥½ | < 1.6x | 300 |
| æ ‡å‡† | < 2.0x | 200 |
| ä¸€èˆ¬ | < 2.5x | 100 |

*æœ€ç»ˆé€Ÿåº¦å¥–åŠ± = åŸºç¡€å¥–åŠ±åˆ† Ã— éš¾åº¦ç­‰çº§åŠ æˆ (1.0~2.0å€)*

---

## ğŸ“Š æ€§èƒ½ä¸æ¸²æŸ“é…ç½®

### æ¸²æŸ“ä¼˜åŒ–
```typescript
const RENDER_CONFIG = {
  shadows: false,       // ç§»åŠ¨ç«¯ç¦ç”¨æŠ•å½±ä¼˜åŒ–æ€§èƒ½ (v1.3.71)
  backdropBlur: false,  // ç¦ç”¨èƒŒæ™¯æ¨¡ç³Šä»¥æ¶ˆé™¤Webkité»‘çº¿
  animationDuration: 300, // åŠ¨ç”»æ—¶é•¿ (ms)
  responsiveScale: true // å¯ç”¨å“åº”å¼ç¼©æ”¾
};
```

### è°ƒè¯•é…ç½®
```typescript
const DEBUG_CONFIG = {
  showCutLines: process.env.NODE_ENV === 'development', // æ˜¾ç¤ºåˆ‡å‰²è¾…åŠ©çº¿
  logCalculations: false // æ—¥å¿—è®°å½•
};
```

---

*ğŸ“ æ–‡æ¡£çŠ¶æ€: å·²ä¿®è®¢ä¸ä¹‹ v3.4 ç»Ÿä¸€è§„åˆ™åŒæ­¥*  
*ğŸ”„ æœ€åæ›´æ–°: 2025/12/31*  
*âœ… å‡†ç¡®æ€§: æ­¤æ–‡æ¡£å·²ä¿®æ­£ï¼Œä¸å†æ»åäº game-rules-unified.md*